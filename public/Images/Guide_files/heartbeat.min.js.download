!function t(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("heartbeat",[],e):"object"==typeof exports?exports["heartbeat"]=e():n["heartbeat"]=e()}(window,function(){return r={},o.m=e=[function(t,n,e){"use strict";function a(){return function t(n){var e=window.location.search;"?"===e[0]&&(e=e.substring(1));var o,r=e.split("&");for(o=0;o<r.length;o+=1){var i=r[o].split("=");if(i[0]===n)return i[1]}return""}("plid")}function c(){var t=window.location.hostname.includes("co.uk")?-3:-2;return window.location.hostname.split(".").slice(t).join(".")}function o(){var t=function t(){var n=window.location.hostname,e=c();return n.replace(".".concat(e),"")}(),n=c(),e=function t(){return encodeURIComponent(window.location.pathname+window.location.search)}(),o=function t(){return window.location.port}(),r=a(),i="https://sso.".concat(n,"/logout?realm=idp&app=").concat(t,"&path=").concat(e,"&to_generic=true");return o&&(i+="&port=".concat(o)),r&&1!=+r&&(i+="&plid=".concat(r)),i}function r(t,n){for(var e=1<arguments.length&&n!==undefined?n:"",o=document.cookie.split(";"),r=0;r<o.length;r++){var i=o[r].split("=");if(i[0].trim()===t)return decodeURIComponent(i[1])}return e}function i(t,n){if(401===t.status){var e=o();window.location.assign(e)}else if(201===t.status){!function t(n,e,o,r){var i=3<arguments.length&&r!==undefined?r:31536e3,a=encodeURIComponent(e),c="".concat(n,"=").concat(a,";domain=").concat(o,";max-age=").concat(i,";path=/");return document.cookie=c}("info_idp_vat_time",Date.now(),n)}return t}function u(){var t=+r("info_idp_vat_time",0);if(24e4<=Date.now()-t){var n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({infotoken:"true",realm:"idp"}),credentials:"include"},e=c();return fetch("https://sso.".concat(e,"/v1/api/token/ui_heartbeat"),n).then(function(t){return i(t,e)})}}function f(){if(!window.disableHeartbeat){var t=r("info_idp");t&&!function t(n){var e=JSON.parse(n);if("basic"===e.auth){if("idp"===e.typ){var o=!0,r=e.plid,i=a();if(i&&+r!=+i&&(o=!1),o){return setInterval(u,6e4),u()}}}}(t)}}e.r(n),e.d(n,"handleVatResult",function(){return i}),e.d(n,"checkVat",function(){return u}),e.d(n,"main",function(){return f}),f()}],o.c=r,o.d=function(t,n,e){o.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="",o(o.s=0);function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var e,r});
//# sourceMappingURL=heartbeat.min.js.map